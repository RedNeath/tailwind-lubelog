@using CarCareTracker.Helper
@inject IConfigHelper config
@inject ITranslationHelper translator
@model Translations
@{
    var userConfig = config.GetUserConfig(User);
    var userLanguage = userConfig.UserLanguage;
}

<!-- Dialog title -->
<div class="p-3 sm:py-2 sm:px-4 border-b border-b-1 border-gray-300 dark:border-gray-700 flex justify-between items-center">
    <h3 class="text-xl font-semibold text-gray-900 dark:text-white">@translator.Translate(userLanguage, "Available Translations")</h3>
    <!-- Quick actions -->
    <div class="flex items-center gap-3">
        <button onclick="downloadAllTranslations()" class="hidden sm:inline-flex w-auto justify-center rounded-md transition-all duration-100 ease-out bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-blue-500 focus:ring-4 focus:outline-none focus:ring-blue-700/25 dark:focus:ring-blue-600/25">
            <heroicon kind="Outline" name="Language" class="size-5 mr-1.5"/>@translator.Translate(userLanguage, "Download All Translations")
        </button>
        <el-dropdown class="sm:hidden inline-block">
            <button class="inline-flex justify-center rounded-md transition-all duration-100 ease-out bg-transparent px-1 py-1 text-sm text-gray-400 dark:text-gray-600 shadow-xs inset-ring inset-ring-gray-300 dark:inset-ring-white/5 hover:text-gray-700 dark:hover:text-gray-400 focus:ring-2 focus:ring-gray-900/5 dark:focus:ring-white/5 w-auto">
                <heroicon kind="Outline" name="EllipsisVertical" class="size-5"/>
            </button>
            
            <el-menu anchor="bottom end" popover class="m-0 w-56 origin-top-right rounded-md bg-white dark:bg-gray-800 p-0 shadow-lg outline outline-1 outline-black/5 dark:-outline-offset-1 dark:outline-white/10 transition [--anchor-gap:theme(spacing.2)] [transition-behavior:allow-discrete] data-[closed]:scale-95 data-[closed]:transform data-[closed]:opacity-0 data-[enter]:duration-100 data-[leave]:duration-75 data-[enter]:ease-out data-[leave]:ease-in">
                <div class="py-1">
                    <button type="button" onclick="downloadAllTranslations()" class="text-left w-full px-4 py-2 text-sm text-gray-600 dark:text-gray-300 hover:outline-none hover:bg-gray-100 hover:text-gray-900 dark:hover:bg-white/5 dark:hover:text-white">
                        @translator.Translate(userLanguage, "Download All Translations")
                    </button>
                </div>
            </el-menu>
        </el-dropdown>
        <button onclick="hideTranslationDownloaderDialog()" class="inline-flex justify-center rounded-md transition-all duration-100 ease-out bg-transparent px-1 py-1 text-sm text-gray-400 dark:text-gray-600 shadow-xs inset-ring inset-ring-gray-300 dark:inset-ring-white/5 hover:text-gray-700 dark:hover:text-gray-400 focus:ring-2 focus:ring-gray-900/5 dark:focus:ring-white/5 w-auto">
            <heroicon kind="Outline" name="XMark" class="size-5"/>
        </button>
    </div>
</div>
<div class="dark:text-white sm:max-h-[60dvh]">
    <div class="p-3 sm:p-4 grid grid-cols-1 gap-4">
        <!-- Dialog content -->
        @if (Model.Africa.Any())
        {
            <h4 class="text-sm font-semibold text-gray-900 dark:text-white">@translator.Translate(userLanguage, "Africa")</h4>
            
            <div class="relative sm:max-h-[65vh] lg:max-h-[60vh] overflow-x-auto overflow-y-auto shadow-md border border-1 border-gray-300 dark:border-gray-700 rounded-lg">
                <table class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400">
                    <thead class="sticky top-0 text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                        <tr>
                            <th scope="col" class="px-6 py-3 w-4/12">@translator.Translate(userLanguage, "Language")</th>
                            <th scope="col" class="px-6 py-3 w-6/12">@translator.Translate(userLanguage, "Download")</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var translation in Model.Africa)
                        {
                            <tr class="bg-white border-t dark:bg-gray-800 dark:border-gray-700 border-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600">
                                <td class="px-6 py-2 w-10/12 cursor-pointer truncate">@StaticHelper.GetTranslationName(translation)</td>
                                <td class="px-6 py-2 w-2/12">
                                    <button type="button"
                                            class="w-full justify-center rounded-md transition-all duration-100 ease-out bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-blue-500 focus:ring-4 focus:outline-none focus:ring-blue-700/25 dark:focus:ring-blue-600/25"
                                            onclick="downloadTranslation('Africa','@translation')">
                                        <heroicon class="size-4 mx-auto" kind="Outline" name="ArrowDownTray"/>
                                    </button>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        }
        
        @if (Model.Asia.Any())
        {
            <h4 class="text-sm font-semibold text-gray-900 dark:text-white">@translator.Translate(userLanguage, "Asia")</h4>
            
            <div class="relative sm:max-h-[65vh] lg:max-h-[60vh] overflow-x-auto overflow-y-auto shadow-md border border-1 border-gray-300 dark:border-gray-700 rounded-lg">
                <table class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400">
                    <thead class="sticky top-0 text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                        <tr>
                            <th scope="col" class="px-6 py-3 w-4/12">@translator.Translate(userLanguage, "Language")</th>
                            <th scope="col" class="px-6 py-3 w-6/12">@translator.Translate(userLanguage, "Download")</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var translation in Model.Asia)
                        {
                            <tr class="bg-white border-t dark:bg-gray-800 dark:border-gray-700 border-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600">
                                <td class="px-6 py-2 w-10/12 cursor-pointer truncate">@StaticHelper.GetTranslationName(translation)</td>
                                <td class="px-6 py-2 w-2/12">
                                    <button type="button"
                                            class="w-full justify-center rounded-md transition-all duration-100 ease-out bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-blue-500 focus:ring-4 focus:outline-none focus:ring-blue-700/25 dark:focus:ring-blue-600/25"
                                            onclick="downloadTranslation('Asia','@translation')">
                                        <heroicon class="size-4 mx-auto" kind="Outline" name="ArrowDownTray"/>
                                    </button>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        }
        
        @if (Model.Europe.Any())
        {
            <h4 class="text-sm font-semibold text-gray-900 dark:text-white">@translator.Translate(userLanguage, "Europe")</h4>
            
            <div class="relative sm:max-h-[65vh] lg:max-h-[60vh] overflow-x-auto overflow-y-auto shadow-md border border-1 border-gray-300 dark:border-gray-700 rounded-lg">
                <table class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400">
                    <thead class="sticky top-0 text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                        <tr>
                            <th scope="col" class="px-6 py-3 w-4/12">@translator.Translate(userLanguage, "Language")</th>
                            <th scope="col" class="px-6 py-3 w-6/12">@translator.Translate(userLanguage, "Download")</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var translation in Model.Europe)
                        {
                            <tr class="bg-white border-t dark:bg-gray-800 dark:border-gray-700 border-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600">
                                <td class="px-6 py-2 w-10/12 cursor-pointer truncate">@StaticHelper.GetTranslationName(translation)</td>
                                <td class="px-6 py-2 w-2/12">
                                    <button type="button"
                                            class="w-full justify-center rounded-md transition-all duration-100 ease-out bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-blue-500 focus:ring-4 focus:outline-none focus:ring-blue-700/25 dark:focus:ring-blue-600/25"
                                            onclick="downloadTranslation('Europe','@translation')">
                                        <heroicon class="size-4 mx-auto" kind="Outline" name="ArrowDownTray"/>
                                    </button>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        }
        
        @if (Model.NorthAmerica.Any())
        {
            <h4 class="text-sm font-semibold text-gray-900 dark:text-white">@translator.Translate(userLanguage, "NorthAmerica")</h4>
            
            <div class="relative sm:max-h-[65vh] lg:max-h-[60vh] overflow-x-auto overflow-y-auto shadow-md border border-1 border-gray-300 dark:border-gray-700 rounded-lg">
                <table class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400">
                    <thead class="sticky top-0 text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                        <tr>
                            <th scope="col" class="px-6 py-3 w-4/12">@translator.Translate(userLanguage, "Language")</th>
                            <th scope="col" class="px-6 py-3 w-6/12">@translator.Translate(userLanguage, "Download")</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var translation in Model.NorthAmerica)
                        {
                            <tr class="bg-white border-t dark:bg-gray-800 dark:border-gray-700 border-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600">
                                <td class="px-6 py-2 w-10/12 cursor-pointer truncate">@StaticHelper.GetTranslationName(translation)</td>
                                <td class="px-6 py-2 w-2/12">
                                    <button type="button"
                                            class="w-full justify-center rounded-md transition-all duration-100 ease-out bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-blue-500 focus:ring-4 focus:outline-none focus:ring-blue-700/25 dark:focus:ring-blue-600/25"
                                            onclick="downloadTranslation('NorthAmerica','@translation')">
                                        <heroicon class="size-4 mx-auto" kind="Outline" name="ArrowDownTray"/>
                                    </button>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        }
        
        @if (Model.SouthAmerica.Any())
        {
            <h4 class="text-sm font-semibold text-gray-900 dark:text-white">@translator.Translate(userLanguage, "SouthAmerica")</h4>
            
            <div class="relative sm:max-h-[65vh] lg:max-h-[60vh] overflow-x-auto overflow-y-auto shadow-md border border-1 border-gray-300 dark:border-gray-700 rounded-lg">
                <table class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400">
                    <thead class="sticky top-0 text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                        <tr>
                            <th scope="col" class="px-6 py-3 w-4/12">@translator.Translate(userLanguage, "Language")</th>
                            <th scope="col" class="px-6 py-3 w-6/12">@translator.Translate(userLanguage, "Download")</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var translation in Model.SouthAmerica)
                        {
                            <tr class="bg-white border-t dark:bg-gray-800 dark:border-gray-700 border-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600">
                                <td class="px-6 py-2 w-10/12 cursor-pointer truncate">@StaticHelper.GetTranslationName(translation)</td>
                                <td class="px-6 py-2 w-2/12">
                                    <button type="button"
                                            class="w-full justify-center rounded-md transition-all duration-100 ease-out bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-blue-500 focus:ring-4 focus:outline-none focus:ring-blue-700/25 dark:focus:ring-blue-600/25"
                                            onclick="downloadTranslation('SouthAmerica','@translation')">
                                        <heroicon class="size-4 mx-auto" kind="Outline" name="ArrowDownTray"/>
                                    </button>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        }
        
        @if (Model.Oceania.Any())
        {
            <h4 class="text-sm font-semibold text-gray-900 dark:text-white">@translator.Translate(userLanguage, "Oceania")</h4>
            
            <div class="relative sm:max-h-[65vh] lg:max-h-[60vh] overflow-x-auto overflow-y-auto shadow-md border border-1 border-gray-300 dark:border-gray-700 rounded-lg">
                <table class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400">
                    <thead class="sticky top-0 text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                        <tr>
                            <th scope="col" class="px-6 py-3 w-4/12">@translator.Translate(userLanguage, "Language")</th>
                            <th scope="col" class="px-6 py-3 w-6/12">@translator.Translate(userLanguage, "Download")</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var translation in Model.Oceania)
                        {
                            <tr class="bg-white border-t dark:bg-gray-800 dark:border-gray-700 border-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600">
                                <td class="px-6 py-2 w-10/12 cursor-pointer truncate">@StaticHelper.GetTranslationName(translation)</td>
                                <td class="px-6 py-2 w-2/12">
                                    <button type="button"
                                            class="w-full justify-center rounded-md transition-all duration-100 ease-out bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-blue-500 focus:ring-4 focus:outline-none focus:ring-blue-700/25 dark:focus:ring-blue-600/25"
                                            onclick="downloadTranslation('Oceania','@translation')">
                                        <heroicon class="size-4 mx-auto" kind="Outline" name="ArrowDownTray"/>
                                    </button>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        }
    </div>
</div>
